(function(){"use strict";var t={5309:function(t,e,a){var l=a(9242),n=a(3396);const i=(0,n._)("link",{href:"https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css",rel:"stylesheet",integrity:"sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor",crossorigin:"anonymous"},null,-1),s={class:"custom-app"};function o(t,e,a,l,o,r){const d=(0,n.up)("router-view");return(0,n.wg)(),(0,n.iD)(n.HY,null,[i,(0,n._)("div",s,[(0,n.Wm)(d)])],64)}var r={name:"App"},d=a(89);const u=(0,d.Z)(r,[["render",o]]);var c=u,b=a(5431);(0,b.z)("/bills/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}});var p=a(7139);const m={class:"custom-app-overview"},f={class:"custom-unpaid-bills-description"},v=(0,n.Uk)(),g=(0,n._)("h3",{class:"custom-bold"},"Unpaid Bills",-1),h={class:"custom-total-amount border rounded"},B=(0,n.Uk)("Total "),w={class:"custom-total-amount-value"},y={class:"custom-unpaid-bills"},_=["innerHTML"],A={class:"custom-paid-bills-description"},x=(0,n.Uk)(),D=(0,n._)("h3",{class:"custom-bold"},"Paid Bills",-1),k={class:"custom-total-amount border rounded"},N=(0,n.Uk)("Total "),C={class:"custom-total-amount-value"},F={class:"custom-paid-bills"},V=["innerHTML"];function I(t,e,a,i,s,o){const r=(0,n.up)("NavbarVue");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",m,[(0,n._)("div",f,[(0,n._)("button",{type:"button",class:"btn btn-primary shadow-none custom-paid-bills-visible-button",onClick:e[0]||(e[0]=t=>o.setUnpaidBillsVisible())},[(0,n._)("i",{class:(0,p.C_)(s.unpaidBillsCollapseIcon)},null,2),v,g])]),(0,n.wy)((0,n._)("div",h,[B,(0,n._)("p",w,(0,p.zw)(s.totalAmountUnpaidBills)+"€",1)],512),[[l.F8,s.unpaidBillsVisible]]),(0,n.wy)((0,n._)("div",y,[(0,n._)("div",{innerHTML:s.unpaidBillsHtml,onClick:e[1]||(e[1]=t=>o.handleClickEvent(t))},null,8,_)],512),[[l.F8,s.unpaidBillsVisible]]),(0,n._)("div",A,[(0,n._)("button",{type:"button",class:"btn btn-primary shadow-none custom-paid-bills-visible-button",onClick:e[2]||(e[2]=t=>o.setPaidBillsVisible())},[(0,n._)("i",{class:(0,p.C_)(s.paidBillsCollapseIcon)},null,2),x,D])]),(0,n.wy)((0,n._)("div",k,[N,(0,n._)("p",C,(0,p.zw)(s.totalAmountPaidBills)+"€",1)],512),[[l.F8,s.paidBillsVisible]]),(0,n.wy)((0,n._)("div",F,[(0,n._)("div",{innerHTML:s.paidBillsHtml,onClick:e[3]||(e[3]=t=>o.handleClickEvent(t))},null,8,V)],512),[[l.F8,s.paidBillsVisible]])]),(0,n.Wm)(r)],64)}const U={class:"custom-nav-bar"},O={class:"navbar fixed-bottom navbar-dark bg-dark"},E={class:"form-inline"},H=(0,n._)("i",{class:"fa-solid fa-border-all"},[(0,n._)("p",{class:"standard-font"},"Overview")],-1),P=(0,n._)("i",{class:"fa-solid fa-plus"},[(0,n._)("p",{class:"standard-font"},"Add new Bill")],-1);function T(t,e,a,l,i,s){const o=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",U,[(0,n._)("nav",O,[(0,n._)("form",E,[(0,n.Wm)(o,{class:"navbar-brand",to:"/"},{default:(0,n.w5)((()=>[H])),_:1}),(0,n.Wm)(o,{class:"navbar-brand",to:"/NewBill"},{default:(0,n.w5)((()=>[P])),_:1})])])])}var S={name:"AppNavbar",data(){return{}},methods:{}};const j=(0,d.Z)(S,[["render",T]]);var M=j,z=(a(1703),a(536)),L=a(4677);let Z,Y="";async function W(){return new Promise(((t,e)=>{const a=window.indexedDB.open("billdb");a.onerror=t=>{console.log("Error opening db",t),e(new Error("Error"))},a.onsuccess=e=>{t(e.target.result),Z=e.target.result},a.onupgradeneeded=t=>{console.log("onupgradeneeded");const e=t.target.result,a=e.createObjectStore("bills",{keyPath:"id"});a.createIndex("by_id","id"),a.createIndex("by_firstname","first_name"),a.createIndex("by_lastname","last_name"),a.createIndex("by_amount","amount"),a.createIndex("by_description","description"),a.createIndex("by_paid","paid"),a.createIndex("by_isNewBill","isNewBill"),a.createIndex("by_lastDateUpdated","lastDateUpdated")}}))}async function R(t,e,a,l,n){t=t.replace(/\s/g,""),e=e.replace(/\s/g,""),a=a.replace(/\s/g,"");var i=new Date,s=i.getDate()+"/"+(i.getMonth()+1)+"/"+i.getFullYear()+" @ "+i.getHours()+":"+i.getMinutes()+":"+i.getSeconds();if(""!==t&&""!==e&&""!==a&&""!==l){const i=Z.transaction("bills","readwrite").objectStore("bills");var o=G();i.put({id:o.toString(),first_name:t,last_name:e,amount:a,description:l,paid:n,isNewBill:!0,lastDateUpdated:s})}else J("You have to fill in a First Name, Last Name, Amount and Description","top-right")}async function $(){return new Promise(((t,e)=>{const a=Z.transaction("bills","readonly").objectStore("bills");let l="",n="",i=0,s=0;var o=[];const r=a.index("by_lastDateUpdated").openCursor(IDBKeyRange.lowerBound(""),"prev");r.onsuccess=function(e){const a=e.target.result;a?(!1===a.value.paid?(l+='<div class="border rounded custom-form-margin" style="border-color:'+Q()+'!important"> <div class="custom-form-padding"> <div class="input-group"> <label class="form-label name">'+a.value.first_name+'</label> <label class="form-label name">'+a.value.last_name+'</label> <label class="form-label">owes you</label> <label class="form-label amount">'+a.value.amount+'€</label> <span class="input-group-text" id="basic-addon2"> <button class="btn btn-outline-primary shadow-none" style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: 15px;" type="button" id="button-addon2" data-customid="add-amount-to-bill-button" data-billid="'+a.value.id+'"><i class="fa-solid fa-plus" data-customid="add-amount-to-bill-button" data-billid="'+a.value.id+'"></i></button> <button class="btn btn-outline-success shadow-none" style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: 15px;" type="button" id="button-addon2" data-customid="set-bill-paid-button-true" data-billid="'+a.value.id+'"><i class="fa-solid fa-check" data-customid="set-bill-paid-button-true" data-billid="'+a.value.id+'"></i></button> <button class="btn btn-outline-danger shadow-none" style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: 15px;" type="button" id="button-addon2" data-customid="delete-bill-button" data-billid="'+a.value.id+'"><i class="fa-solid fa-trash-can" data-customid="delete-bill-button" data-billid="'+a.value.id+'"></i></button> </span> <div class="input-group"> <label class="form-label description">'+a.value.description+"</label> </div> </div> </div> </div>",i+=parseFloat(a.value.amount)):(n+='<div class="border rounded custom-form-margin" style="border-color:'+Q()+'!important"> <div class="custom-form-padding"> <div class="input-group"> <label class="form-label name">'+a.value.first_name+'</label> <label class="form-label name">'+a.value.last_name+'</label> <label class="form-label">owes you</label> <label class="form-label amount">'+a.value.amount+'€</label> <span class="input-group-text" id="basic-addon2"> <button class="btn btn-outline-danger shadow-none" style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: 15px;" type="button" id="button-addon2" data-customid="set-bill-paid-button-false" data-billid="'+a.value.id+'"><i class="fa-solid fa-xmark" data-customid="set-bill-paid-button-false" data-billid="'+a.value.id+'"></i></button> <button class="btn btn-outline-danger shadow-none" style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: 15px;" type="button" id="button-addon2" data-customid="delete-bill-button" data-billid="'+a.value.id+'"><i class="fa-solid fa-trash-can" data-customid="delete-bill-button" data-billid="'+a.value.id+'"></i></button> </span> <div class="input-group"> <label class="form-label description">'+a.value.description+"</label> </div> </div> </div> </div>",s+=parseFloat(a.value.amount)),a.continue()):(o.push(l,n,Math.round(100*(i+Number.EPSILON))/100,Math.round(100*(s+Number.EPSILON))/100),t(o))},r.onerror=t=>{e(new Error("Error while getting all Bills"))}}))}function q(t,e){const a=Z.transaction("bills","readwrite").objectStore("bills"),l=a.get(t);l.onsuccess=()=>{const t=l.result;t.paid=e;const n=a.put(t);n.onsuccess=()=>{console.log(n.result)}}}function K(t,e,a){const l=Z.transaction("bills","readwrite").objectStore("bills"),n=l.get(t);let i=0;n.onsuccess=()=>{const t=n.result;console.log(n.result),!0===t.isNewBill&&(t.description+=' <p class="custom-bold">'+t.amount+"€</p>",t.isNewBill=!1),i=parseFloat(t.amount)+parseFloat(e),t.amount=i,t.description+="<br>"+a+' <p class="custom-bold">'+e+"€</p>";var s=new Date;t.lastDateUpdated=s.getDate()+"/"+(s.getMonth()+1)+"/"+s.getFullYear()+" @ "+s.getHours()+":"+s.getMinutes()+":"+s.getSeconds();const o=l.put(t);o.onsuccess=()=>{console.log(o.result)}}}async function X(t){const e=Z.transaction("bills","readwrite").objectStore("bills"),a=e.delete(t);a.oncomplete=function(){console.log("Bill"+t+"deleted")}}function G(){return(0,z.Z)()}function J(t,e){const a=(0,L.pm)();a.error(t,{timeout:5e3,position:e,pauseOnFocusLoss:!1,pauseOnHover:!1,closeButton:!1,closeOnClick:!0})}function Q(){const t=["#F23557","#F0D43A","#22B2DA","#3B4A6B"];let e="";while(""===e){const a=t[Math.floor(Math.random()*t.length)];a!==Y&&(e=a)}return Y=e,e.toString()}var tt={initDB:W,putNewBillToDatabase:R,getAllBillsFromDatabase:$,setBillPaid:q,addAmountToBill:K,deleteBill:X,setError:J},et={name:"AppOverview",components:{NavbarVue:M},data(){return{unpaidBillsHtml:"",paidBillsHtml:"",totalAmountUnpaidBills:0,totalAmountPaidBills:0,unpaidBillsVisible:!0,unpaidBillsCollapseIcon:"",paidBillsVisible:!1,paidBillsCollapseIcon:"fa-solid fa-caret-right"}},methods:{getAllBillsFromDatabase:async function(){await tt.initDB(),tt.getAllBillsFromDatabase().then((t=>{""!==t[0]?this.unpaidBillsHtml=t[0]:this.unpaidBillsHtml="<p>There are no unpaid bills</p>",""!==t[1]?this.paidBillsHtml=t[1]:this.paidBillsHtml="<p>There are no paid bills</p>",this.totalAmountUnpaidBills=t[2],this.totalAmountPaidBills=t[3]})).catch((t=>{console.log(t.message)}))},setBillPaid:async function(t,e){tt.setBillPaid(t,e),this.getAllBillsFromDatabase()},deleteBill:async function(t){tt.deleteBill(t),this.getAllBillsFromDatabase()},handleClickEvent:function(t){"set-bill-paid-button-true"===t.target.getAttribute("data-customid")&&this.setBillPaid(t.target.getAttribute("data-billid"),!0),"set-bill-paid-button-false"===t.target.getAttribute("data-customid")&&this.setBillPaid(t.target.getAttribute("data-billid"),!1),"delete-bill-button"===t.target.getAttribute("data-customid")&&this.deleteBill(t.target.getAttribute("data-billid")),"add-amount-to-bill-button"===t.target.getAttribute("data-customid")&&this.editBill(t.target.getAttribute("data-billid"))},setPaidBillsVisible:function(){!0===this.paidBillsVisible?(this.paidBillsVisible=!1,this.paidBillsCollapseIcon="fa-solid fa-caret-right"):(this.paidBillsVisible=!0,this.paidBillsCollapseIcon="")},setUnpaidBillsVisible:function(){!0===this.unpaidBillsVisible?(this.unpaidBillsVisible=!1,this.unpaidBillsCollapseIcon="fa-solid fa-caret-right"):(this.unpaidBillsVisible=!0,this.unpaidBillsCollapseIcon="")},editBill:async function(t){await tt.initDB(),localStorage.setItem("currentBillId",t),this.$router.push("/EditBill")}},async created(){this.getAllBillsFromDatabase()}};const at=(0,d.Z)(et,[["render",I]]);var lt=at;const nt={class:"custom-new-bill"},it={class:"input-group"},st=(0,n._)("span",{class:"input-group-text"},"First name",-1),ot={class:"input-group"},rt=(0,n._)("span",{class:"input-group-text"},"Last name",-1),dt={class:"input-group"},ut={class:"input-group-text"},ct=(0,n._)("span",{class:"input-group-text"},"€",-1),bt={class:"input-group mb-3"};function pt(t,e,a,i,s,o){const r=(0,n.up)("navbar-vue");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",nt,[(0,n._)("div",it,[st,(0,n.wy)((0,n._)("input",{type:"text","aria-label":"First name",class:"form-control shadow-none","onUpdate:modelValue":e[0]||(e[0]=t=>s.first_name=t)},null,512),[[l.nr,s.first_name]])]),(0,n._)("div",ot,[rt,(0,n.wy)((0,n._)("input",{type:"text","aria-label":"Last name",class:"form-control shadow-none","onUpdate:modelValue":e[1]||(e[1]=t=>s.last_name=t)},null,512),[[l.nr,s.last_name]])]),(0,n._)("div",dt,[(0,n.wy)((0,n._)("input",{type:"text",class:"form-control shadow-none","aria-label":"Euro amount (with dot and two decimal places)",placeholder:"Amount",onChange:e[2]||(e[2]=t=>o.validateAmount(t)),"onUpdate:modelValue":e[3]||(e[3]=t=>s.amount=t)},null,544),[[l.nr,s.amount]]),(0,n._)("span",ut,(0,p.zw)(s.amount),1),ct]),(0,n._)("div",bt,[(0,n.wy)((0,n._)("input",{type:"text",class:"form-control shadow-none",placeholder:"Description","aria-label":"Description","aria-describedby":"button-addon2","onUpdate:modelValue":e[4]||(e[4]=t=>s.description=t)},null,512),[[l.nr,s.description]]),(0,n._)("button",{class:"btn btn-primary shadow-none",type:"button",id:"button-addon2",onClick:e[5]||(e[5]=(...t)=>o.putNewBillToDatabase&&o.putNewBillToDatabase(...t))},"Add New Bill")])]),(0,n.Wm)(r)],64)}var mt={name:"AppNewBill",components:{NavbarVue:M},data(){return{first_name:"",last_name:"",amount:"",description:""}},methods:{putNewBillToDatabase:async function(){await tt.initDB(),tt.putNewBillToDatabase(this.first_name,this.last_name,this.amount,this.description,!1),this.first_name="",this.last_name="",this.amount="",this.description=""},validateAmount:function(t){isNaN(t.target.value)&&(tt.setError("String values are not allowed as amount","top-right"),this.amount="")}}};const ft=(0,d.Z)(mt,[["render",pt]]);var vt=ft;const gt={class:"custom-edit-bill"},ht={class:"input-group"},Bt={class:"input-group-text"},wt=(0,n._)("span",{class:"input-group-text"},"€",-1),yt={class:"input-group mb-3"};function _t(t,e,a,i,s,o){return(0,n.wg)(),(0,n.iD)("div",gt,[(0,n._)("div",ht,[(0,n.wy)((0,n._)("input",{type:"text",class:"form-control shadow-none","aria-label":"Euro amount (with dot and two decimal places)",placeholder:"Amount",onChange:e[0]||(e[0]=t=>o.validateAmount(t)),"onUpdate:modelValue":e[1]||(e[1]=t=>s.amount=t)},null,544),[[l.nr,s.amount]]),(0,n._)("span",Bt,(0,p.zw)(s.amount),1),wt]),(0,n._)("div",yt,[(0,n.wy)((0,n._)("input",{type:"text",class:"form-control shadow-none",placeholder:"Description","aria-label":"Description","aria-describedby":"button-addon2","onUpdate:modelValue":e[2]||(e[2]=t=>s.description=t)},null,512),[[l.nr,s.description]]),(0,n._)("button",{class:"btn btn-primary shadow-none",type:"button",id:"button-addon2",onClick:e[3]||(e[3]=t=>o.editBill())},"Add To Bill")]),(0,n._)("button",{class:"btn btn-outline-primary shadow-none",type:"button",id:"button-addon2",onClick:e[4]||(e[4]=t=>this.$router.push("/"))},"Back")])}var At={name:"AppNewBill",components:{},data(){return{amount:"",description:""}},methods:{editBill:async function(){await tt.initDB(),tt.addAmountToBill(localStorage.getItem("currentBillId"),this.amount,this.description),this.$router.push("/")},validateAmount:function(t){isNaN(t.target.value)&&(tt.setError("String values are not allowed as amount","top-right"),this.amount="")}}};const xt=(0,d.Z)(At,[["render",_t]]);var Dt=xt,kt=a(678);a(343);const Nt=(0,kt.p7)({mode:"hash",history:(0,kt.r5)(),linkActiveClass:"custom-nav-bar-active",linkExactActiveClass:"custom-nav-bar-active",base:"production",routes:[{path:"/",component:lt},{path:"/NewBill",component:vt},{path:"/EditBill",component:Dt}]}),Ct={};(0,l.ri)(c).use(Nt).use(L.ZP,Ct).mount("#app")}},e={};function a(l){var n=e[l];if(void 0!==n)return n.exports;var i=e[l]={exports:{}};return t[l](i,i.exports,a),i.exports}a.m=t,function(){var t=[];a.O=function(e,l,n,i){if(!l){var s=1/0;for(u=0;u<t.length;u++){l=t[u][0],n=t[u][1],i=t[u][2];for(var o=!0,r=0;r<l.length;r++)(!1&i||s>=i)&&Object.keys(a.O).every((function(t){return a.O[t](l[r])}))?l.splice(r--,1):(o=!1,i<s&&(s=i));if(o){t.splice(u--,1);var d=n();void 0!==d&&(e=d)}}return e}i=i||0;for(var u=t.length;u>0&&t[u-1][2]>i;u--)t[u]=t[u-1];t[u]=[l,n,i]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var l in e)a.o(e,l)&&!a.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:e[l]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,l){var n,i,s=l[0],o=l[1],r=l[2],d=0;if(s.some((function(e){return 0!==t[e]}))){for(n in o)a.o(o,n)&&(a.m[n]=o[n]);if(r)var u=r(a)}for(e&&e(l);d<s.length;d++)i=s[d],a.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return a.O(u)},l=self["webpackChunkbills"]=self["webpackChunkbills"]||[];l.forEach(e.bind(null,0)),l.push=e.bind(null,l.push.bind(l))}();var l=a.O(void 0,[998],(function(){return a(5309)}));l=a.O(l)})();
//# sourceMappingURL=app.e5cfa3cd.js.map